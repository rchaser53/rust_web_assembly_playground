<!doctype html>
<html>
<head></head>
<body>
  <canvas id="nyan"></canvas>
  <script>
    const name = 'wasm-c248ad4761e2828f';
    var Module = {
      preRun: [],
      postRun: [],
      wasmBinaryFile: `${name}.wasm`,
      print: text => {
        console.log(text);
      },
      printErr: text => {
        console.error(text);
      },
      canvas: document.getElementById('nyan')
    };

    fetch(`${name}.wasm`)
      .then(resp => resp.arrayBuffer())
      .then(buffer => {
        Module.wasmBinary = buffer;
        const script = document.createElement("script");
        script.src = `${name}.js`;
        // script.addEventListener('load', (e) => {
        //   const main = document.createElement('script');
        //   main.src = 'main.js';
        //   document.body.appendChild(main);
        // });
        document.body.appendChild(script);
      })

  </script>
</body>
</html>